<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>gEDA PCB Stipple Plugin</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">gEDA PCB Stipple Plugin </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>This <a href="http://sandpiper-inc.com/stipple/src">plugin</a> is for use with <a href="http://pcb.geda-project.org/">gEDA PCB</a>. It provides cross-hatching for ground planes. When designing printed circuit boards, there are two areas where such a feature is of interest.</p>
<ul>
<li><b>Capacitive Sensors</b> Buttons and Sliders which are etched on the PCB are designed to measure the ~10pf additional capacitance introduced by the human touch. The discharge time of a copper area is monitored and an event is triggered when the threshold of the human touch is exceeded. Having solid ground planes around the sensor decreases the intrinsic capacitance of the button, reducing overall discharge time, and thus reduces the signal to noise ratio of the human touch component. Hatched ground planes, especially when staggered with different spacing over the two outer layers of the board, reduce this effect, but at the expense of ground-return capacity.</li>
<li><b>Flexible Circuits</b> Flexible circuits which contain solid copper planes loose their flexibility, since the shape memory of the copper overwhelms the flexibility of the flexible construction. Hatched planes reduce this shape memory.</li>
</ul>
<h1><a class="anchor" id="feature_sec"></a>
Usage</h1>
<h2><a class="anchor" id="Compiling"></a>
Compiling the Plugin</h2>
<p>The plugin is compiled with gcc, and works on Linux, OSX, and Windows. See the README for details.</p>
<h2><a class="anchor" id="Usage"></a>
Using the Plugin</h2>
<div class="image">
<img src="Screens.png" alt="Screens.png"/>
</div>
<p>In the first screen above, an example of layer groupings is shown. The "comp-stipple" layer is linked with the "component" layer, while the "comp-perim" layer is independent. A single simple polygon is illustrated on the perimeter layer in this example, but normal use might include any number of overlapping polygons of most any shape. The stipple process calculates insets for pins, pads, and lines, and for a border for the union of any contiguous region. Note that all of these structures are flashed, and no painting of any kind is used. The UCamco technical note "Gerber Format Application Note - Painting Considered Harmful" explains the problem with simply painting lots of lines to achieve the illustrated effect.</p>
<p>The plugin is started using a "sp" command (after typing ":" to get a PCB command line). The resulting dialog box is accepted, and the process executes. When complete, the "comp-stipple" layer is populated as illustrated. Note that the artifacts that PCB shows along its polygon intersections do not in general appear in finished boards. One must examine a finished board under a microscope to confirm this. This is because the plugin uses the Boost library for calculations, rather than the PCB internal polygon routines.</p>
<p>The polygons from a single layer of a pcb are used as a template for stippling a region. First, the intersecting polygons are merged, and a bounding box is drawn around the set of intersected polygons. This set is inserted to a second (presumably empty) layer of the pcb. Then, holes are poked in the polygons, with bounding boxes around all vias, lines, and element pads.</p>
<h2><a class="anchor" id="Polygon"></a>
Rendering within PCB</h2>
<div class="image">
<img src="ButtonClip.png" alt="ButtonClip.png"/>
</div>
<p>The image at the left shows a slice taken out of the via anuulus in a PCB rendered session. The image on the right, however, is a picture of a board made from Gerber files exported from this design. Note that the flashing does not occur in the finished board as pictured. In general, the polygon artifacts rendered by PCB do not necessarily distort the fabricated board.</p>
<h2><a class="anchor" id="Calc"></a>
Percent Fill Calculation Method</h2>
<div class="image">
<img src="PercentFill.png"  alt="Percent Fill" align="left" border="0" width="675" height="538"/>
</div>
<p>Some sources (e.g. <a href="http://www.cypress.com/?docID=27113">Cypress Semiconductor AN2292</a>) describe a hatch pattern of 7 mil traces with a 70 mil pitch as a ten percent fill. The method for calculating the reported percent fill here is different. Remembering the formula for the area of a isosceles right triangle (and using symetry): </p><div align="left"> <img class="formulaInl" alt="$ Percent\ Fill = 100 \times (1- \frac{1}{2}(\frac{1}{\sqrt{2}}(Pitch)-\sqrt{2}(Trace))^2\div \frac{1}{2}(\frac{1}{\sqrt{2}}(Pitch))^2) $" src="form_0.png"/></div><h2><a class="anchor" id="loop"></a>
Ground Loops</h2>
<p>Although one may construct ground loops through a set of adjoining polygons with a large hole in the middle, this plugin will fill them. If this is really what is desired, one might construct a set of disjoint border polygons connected with unstippled polygon slices to form an effective ground loop. Note that in general, ground loops form an antenna of some geometry-dependent resonant frequency, and are typically avoided in PCB design.</p>
<h1><a class="anchor" id="author"></a>
Charles Repetti</h1>
<p>This program was written by Charles Repetti, who can be reached on the gEDA mailing list. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 4 2015 10:21:05 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
